<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' gallerybear.com * gap: ws: https://ssl.gstatic.com;img-src * data: content:;style-src 'self' 'unsafe-inline' data: blob:;script-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">


   
    <script type="text/javascript" src="js/jquery.min.js"></script>
 <script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
     
       <link href="css/ratchet.min.css" rel="stylesheet">
 <link rel="stylesheet" type="text/css" href="css/uikit.gradient.min.css">

          <script src="js/uikit.js"></script>
          <script src="js/ratchet.js"></script>
             <link rel="stylesheet" type="text/css" href="css/app.css" />
                   <link href="css/style.css" rel="stylesheet">
                    <script type="text/javascript" src="cordova.js"></script>
                    <script type="text/javascript" src="js/components/notify.min.js"></script>
    <title>Hello World</title>
</head>

<body>
<header class="bar bar-nav">
 <a class="icon icon-gear pull-right"  onclick="open_right();"></a>

  <h1 class="title">내방</h1>
</header>
<div id="map" data-uk-grid style="height:30%;">map loading...
</div>
<div id="main_contents" style="overflow-y: scroll; width:100%; height:100%;  padding-bottom: 100px; padding-top:0px;">


</div>
<div id="bang_modal" class="modal">
  <header class="bar bar-nav">
    <a class="icon icon-close pull-right" href="#bang_modal"></a>
    <h1 class="title">매물등록</h1>
  </header>

  <div class="content" style="margin-top:10px;">
   
  <input type="text" placeholder="매물명">
  <input type="text" placeholder="주소">
 <a href=# onclick="getImage()">사진추가</a> 
  <textarea rows="5"></textarea>
  <button class="btn btn-positive btn-block" >등록하기</button>

  </div>
</div>


<div id="shop_info_modal" class="modal">
  <header class="bar bar-nav">
    <a class="icon icon-close pull-right" href="#shop_info_modal"></a>
    <h1 class="title">상세 내용 보기</h1>
  </header>

  <div class="content" id="shop_contents">
    <p class="content-padded">내용</p>
  </div>
</div>



<nav class="bar bar-tab bar-footer">
  <a class="tab-item active" id="main_icon" href="#" onclick="main_show()">
    <span class="icon icon-home"></span>
    <span class="tab-label">홈</span>
  </a>
    <a class="tab-item active" id="main_icon" href="#" onclick="area_show()">
    <span class="icon icon-home"></span>
    <span class="tab-label">지역별</span>
  </a>
    <a class="tab-item active" id="main_icon" href="#" onclick="subway_show()">
    <span class="icon icon-home"></span>
    <span class="tab-label">지하철역</span>
  </a>
  <a class="tab-item" href="#" id="board_icon" onclick="input_bang() ">
    <span class="icon icon-compose"></span>
    <span class="tab-label">매물등록</span>
  </a>
 
  <a class="tab-item" href="#"  id="exit_icon" href="#"  onclick="exit_show()">
    <span class="icon uk-icon-close"></span>
    <span class="tab-label">종료</span>
  </a>
</nav>

     <script type="text/javascript" charset="utf-8" src="js/PushNotification.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/menu.js"></script>
   <script type="text/javascript" src="js/marker.js"></script>
    
    <script type="text/javascript">
        app.initialize();
    </script>
     <script type="text/javascript" src="js/common.js"></script>
     <script type="text/javascript" src="js/camera.js"></script>
     <script type="text/javascript" src="js/comment.js"></script>
     <script type="text/javascript" src="js/chat.js"></script>
     <script type="text/javascript" src="js/right_menu.js"></script>
     <script type="text/javascript" src="js/board.js"></script> 
     <script type="text/javascript" src="js/talk.js"></script> 
      <script type="text/javascript" src="js/map.js"></script> 

     <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIjYYnR4RImDb8X_tD1s8ud0I0KeGAKDs"></script>
 



</body>


</html>
<script>
 var map;
    var locations;
    var data_app;
     var company_name;
    var map_kind;
    var point_x;
    var point_y;
    var chicago = {lat: 41.85, lng: -87.65}; 
    var markers = new Array();
    var data_company=new Array();
    var data_no=new Array();
    var data_point_x=new Array();
    var data_point_y=new Array();
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: -34.397, lng: 150.644},
    zoom: 5
  });

  $.ajax({
 type: "GET",
 url: "http://homes1004.kr/shop_json_app.php",
 crossDomain: true,
 cache: false,
 success: function(result){
 var result=$.parseJSON(result);

 $.each(result, function(i, field){
   data_company.push(field.title);
   data_no.push(field.no);
   data_point_y.push(field.point_y);
   data_point_x.push(field.point_x);

 

 });
 

 marker_load();



 }});

  }

  function marker_load() {


  
var infowindow = new google.maps.InfoWindow();
      var marker, i;
  
    for (i = 0; i < data_no.length; i++) { 
     
       
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(data_point_x[i], data_point_y[i]),
        map: map
     });
       move_map(data_point_x[i],data_point_y[i]);

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {

          
          infowindow.setContent("<span onclick='shop_info("+data_no[i]+")'>"+data_company[i]+"</span>");
          infowindow.open(map, marker);
        }
      })(marker, i));
        markers.push(marker);
    }
    var markerClusterer = new MarkerClusterer(map, markers, {
          maxZoom: 16,
          gridSize: 50,
          imagePath: './images/m'
});

}


  function move_map(x,y) {
      var x=x;
      var y=y;
      var darwin = new google.maps.LatLng(x, y);
  map.setCenter(darwin);
  map.setZoom(11);
  }

function shop_info(no) {
  var no=no;
   $("#shop_info_modal").addClass('active');
   $.post("http://homes1004.kr/shop_info_app.php",
   {
    no:no
    
       },
   function(data){

$("#shop_contents").html(data);
  
   });

}
initMap();

 // setInterval("check_msg()", 1000);
</script> 